(()=>{var j=Object.create;var S=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var P=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports);var I=(a,e,i,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of A(e))!x.call(a,s)&&s!==i&&S(a,s,{get:()=>e[s],enumerable:!(t=E(e,s))||t.enumerable});return a};var U=(a,e,i)=>(i=a!=null?j(O(a)):{},I(e||!a||!a.__esModule?S(i,"default",{value:a,enumerable:!0}):i,a));var C=P((q,v)=>{"use strict";function N({mustBeMetaMask:a=!1,silent:e=!1,timeout:i=3e3}={}){s();let t=!1;return new Promise(r=>{window.ethereum?n():(window.addEventListener("ethereum#initialized",n,{once:!0}),setTimeout(()=>{n()},i));function n(){if(t)return;t=!0,window.removeEventListener("ethereum#initialized",n);let{ethereum:c}=window;c&&(!a||c.isMetaMask)?r(c):(!e&&console.error("@metamask/detect-provider:",a&&c?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum."),r(null))}});function s(){if(typeof a!="boolean")throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if(typeof e!="boolean")throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if(typeof i!="number")throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}}v.exports=N});var T=U(C(),1);var B=function(a){let e=arguments,i=this,t,s,r=1,n="",c="",o=[0],l=h=>{r===1&&(h||(n=n.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?o.push(h?e[h]:n):r===3&&(h||n)?(o[1]=h?e[h]:n,r=2):r===2&&n==="..."&&h?o[2]=Object.assign(o[2]||{},e[h]):r===2&&n&&!h?(o[2]=o[2]||{})[n]=!0:r>=5&&(r===5?((o[2]=o[2]||{})[s]=h?n?n+e[h]:e[h]:n,r=6):(h||n)&&(o[2][s]+=h?n+e[h]:n)),n=""};for(let h=0;h<a.length;h++){h&&(r===1&&l(),l(h));for(let d=0;d<a[h].length;d++)t=a[h][d],r===1?t==="<"?(l(),o=[o,"",null],r=3):n+=t:r===4?n==="--"&&t===">"?(r=1,n=""):n=t+n[0]:c?t===c?c="":n+=t:t==='"'||t==="'"?c=t:t===">"?(l(),r=1):r&&(t==="="?(r=5,s=n,n=""):t==="/"&&(r<5||a[h][d+1]===">")?(l(),r===3&&(o=o[0]),r=o,(o=o[0]).push(i.apply(null,r.slice(1))),r=0):t===" "||t==="	"||t===`
`||t==="\r"?(l(),r=2):n+=t),r===3&&n==="!--"&&(r=4,o=o[0])}return l(),o.length>2?o.slice(1):o[1]},u=B.bind((a,e,...i)=>{let t=null,s=!1;["svg","use","symbol","path","g","defs","title"].indexOf(a)>-1?(t=document.createElementNS("http://www.w3.org/2000/svg",a),s=!0):t=document.createElement(a);for(let r in e)if(r.slice(0,2)==="on"){let n=r.slice(2),c=e[r];if(c==null)continue;t.addEventListener(n,c)}else if(["disabled","selected","checked"].indexOf(r)>-1)e[r]&&t.setAttribute(r,r);else if(r==="xlinkHref"&&s)e[r]&&t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e[r]);else if(r==="href"&&s)e[r]&&t.setAttributeNS("http://www.w3.org/1999/xlink","href",e[r]);else{if(e[r]==null)continue;t.setAttribute(r,e[r])}return i.length===0?t:(i.flat(1).forEach(r=>{r instanceof Node?t.appendChild(r):t.appendChild(document.createTextNode(r))}),a==null?t.children:t)});function b(a,e){for(;e.firstChild;)e.removeChild(e.firstChild);Array.isArray(a)?a.forEach(i=>e.appendChild(i)):e.appendChild(a)}function p(a){return a.replace(/([A-Z])/g,"-$1").toLowerCase()}function f(a){return(typeof a=="object"||typeof a=="function")&&typeof a.then=="function"}function g(a,e){let i=function(t){if(!t)return[];let s=[];return Object.keys(t).forEach(r=>{(t[r].observed==null||t[r].observed)&&s.push(p(r))}),s}(e.props);globalThis.customElements.get(a)||globalThis.customElements.define(a,class extends globalThis.HTMLElement{static get observedAttributes(){return i}get componentTagName(){return a}connectedCallback(){this.connectedCallbackCount==null&&(this.connectedCallbackCount=0),this.connectedCallbackCount=this.connectedCallbackCount+1,this._checkInit(),this._preprocess()}disconnectedCallback(){typeof this.removed=="function"&&(this.removed(),this.isRemovedCalled=!0)}attributeChangedCallback(){this.connectedCallbackCount!=null&&(this._checkInit(),this._preprocess())}get initialised(){return this._props&&this._state&&this._computed&&this.templateRenderer}_checkInit(){this.initialised||this._init(e)}_init(t){if(this._props=t.props||{},this._computed=t.computed||{},t.state&&typeof t.state!="function")throw new Error("State must be a function!");this._state=t.state||{},this.computedCache={},this.status="render",this.connectedCallbackCount=0,this.props=this._processProps(),typeof this._state=="function"&&(this._state=this._state.bind(this)()),this.state=this._monitorState(this._state),this.root=this._processRoot(t.root),this.slots=this._processSlots(),this.render=t.render||null,this.templateRenderer=t.renderer,this.template=null,this.created=t.created||null,this.mounted=t.mounted||null,this.updated=t.updated||null,this.removed=t.removed||null,this.isCreatedCalled=!1,this.isMountedCalled=!1,this.isRemovedCalled=!1,this.emit=(s,r)=>{(function(n,c,o={}){let l=Object.assign({},{bubbles:!0,cancelable:!0,composed:!1},o),h;"composed"in CustomEvent.prototype?h=new CustomEvent(c,l):(h=document.createEvent("CustomEvent"),h.initCustomEvent(c,l.bubbles,l.cancelable,l.detail),Object.defineProperty(h,"composed",{value:l.composed})),n.dispatchEvent(h)})(this,s,{detail:r})},this.setState=(s,r)=>{let n=o=>{if(!o||typeof o!="object")return;let l=this.updated;r&&(this.updated=()=>{setTimeout(r),this.updated=l||void 0}),this.status="transaction";for(let h in o)this.state[h]&&this.state[h]===o[h]||(this.state[h]=o[h]);this.status="render",this._processRender()},c=s(this.state);f(c)?c.then(n):n(c)},this._processMethodsAndComputedProps(t),this._processInstanceProps(this._props),typeof this.created!="function"||this.isCreatedCalled||(this.created(),this.isCreatedCalled=!0)}_processProps(){let t={};return Object.keys(this._props).forEach(s=>{let r={},n=this._props[s],c=this._getAttribute(s),o=null;if(n.default!=null&&(o=n.default),n.required&&c==null)o!=null?(console.info(`No biggie, the required prop '${s}' has no value set, so the default has been set`),r[s]=o):(r[s]=null,console.error(`The required prop '${s}' has no value set`));else switch(n.type){case String:default:r[s]=c||o;break;case Number:r[s]=c!=null?parseFloat(c):o??0;break;case Boolean:r[s]=c!=null?c.toString()==="true":o!=null&&o;break;case Object:try{r[s]=c!=null?JSON.parse(c):o??void 0}catch(l){r[s]=o??void 0,console.error("An object parse issue occurred",l)}}t[s]=r[s],this._instanceProps&&this._instanceProps[s]&&(t[s]=this._instanceProps[s])}),t}_processMethodsAndComputedProps(t){let s=this,r=Object.keys(t);r.length&&r.forEach(n=>{s[n]||typeof t[n]!="function"||(s[n]=t[n].bind(s)),n==="computed"&&this._processComputed(t[n])})}_processRoot(t){switch(t){case"standard":default:return this;case"shadow":return this.attachShadow({mode:"open"});case"shadow:closed":return this.attachShadow({mode:"closed"})}}_processComputed(t){let s=this,r=Object.keys(t);r.length&&r.forEach(n=>{s[n]?console.warn(`Computed property '${n}' already exists on the component instance`):Object.defineProperty(s,n,{get:()=>(s.computedCache[n]||(s.computedCache[n]=t[n].bind(s)()),s.computedCache[n])})})}_processRender(){let t=this.render?this.render():void 0;t&&(this.template=t,this._updateRender())}_monitorState(t){let s=this;return new Proxy(t,{set:(r,n,c)=>(r[n]===c||(r[n]=c,s.computedCache={},s.status==="render"&&s._processRender()),!0)})}_processSlots(){let t=this.childNodes,s={default:[]};return t.length>0&&[...t].forEach(r=>{let n=r.getAttribute?r.getAttribute("slot"):null;n?s[n]=r:s.default.push(r)}),s}_getAttribute(t){try{return this.getAttribute(p(t))}catch(s){return console.error("A get prop error occurred",s),""}}_processInstanceProps(t){let s=this,r=Object.keys(t);t&&r.forEach(n=>{let c;s[n]&&(c=s[n],delete s[n]),Object.defineProperty(s,n,{get(){return this._instanceProps&&this._instanceProps[n]?this._instanceProps[n]:this.getAttribute(p(n))},set(o){return this._instanceProps||(this._instanceProps={}),this._instanceProps[n]=o,this.setAttribute(p(n),typeof o=="object"?JSON.stringify(o):o.toString()),!0},enumerable:!0}),c&&(s[n]=c)})}_preprocess(){this.computedCache={},this.props=this._processProps(),this._processRender()}_updateRender(){this.template&&(f(this.template)?this.template.then(t=>{this.templateRenderer(t,this.root),this._callLifecycleMethods()}).catch(t=>console.error("A component render error occurred",t)):(this.templateRenderer(this.template,this.root),this._callLifecycleMethods()))}_callLifecycleMethods(){typeof this.mounted!="function"||this.isMountedCalled||this.mounted(),this.isMountedCalled=!0,typeof this.updated=="function"&&this.isMountedCalled&&this.updated()}})}function y(a,e){return{...e,created(){this.subscribeCallback=()=>{this.computedCache={},this._processRender()},this.setStore(a),e.created&&e.created.call(this)},mounted(){this._subscribeToStores(!1),e.mounted&&e.mounted.call(this)},updated(){this._subscribeToStores(!1),e.updated&&e.updated.call(this)},removed(){this._unsubscribeFromStores(),e.removed&&e.removed.call(this)},setStore(i){this.store=i,this._subscribeToStores()},_subscribeToStores(i=!0){this.store&&this.store.subscribe&&typeof this.store.subscribe=="function"&&!this.unsubscribe?(this.unsubscribe=this.store.subscribe(this.subscribeCallback),i&&this.subscribeCallback()):this.store&&typeof this.store=="object"&&!this.store.subscribe&&(this.unsubscribe={},Object.keys(this.store).forEach(t=>{this.store[t]&&this.store[t].subscribe&&typeof this.store[t].subscribe=="function"&&!this.unsubscribe[t]&&(this.unsubscribe[t]=this.store[t].subscribe(this.subscribeCallback))}),i&&this.subscribeCallback())},_unsubscribeFromStores(){this.store&&this.unsubscribe&&typeof this.unsubscribe=="object"?(Object.keys(this.unsubscribe).forEach(i=>{this.unsubscribe[i]()}),this.unsubscribe=null):this.store&&this.unsubscribe&&typeof this.unsubscribe=="function"&&(this.unsubscribe(),this.unsubscribe=null)}}}var _=class{constructor(e,i){this.namespace=e,this.storage=i}setState(e){e?(this.storage.setItem(`${this.namespace}:state`,typeof e=="string"?e:JSON.stringify(e)),this.storage.setItem(`${this.namespace}:lastUpdated`,new Date().getTime().toString())):this.removeState()}getState(){let e=this.storage.getItem(`${this.namespace}:state`);return e?JSON.parse(e):void 0}lastUpdated(){let e=this.storage.getItem(`${this.namespace}:lastUpdated`);return e?parseInt(e,10):void 0}removeState(){this.storage.removeItem(`${this.namespace}:state`),this.storage.removeItem(`${this.namespace}:lastUpdated`)}};function $(a,e="session"){return new _(a,e==="local"?globalThis.localStorage:globalThis.sessionStorage)}var m=class{constructor(e){let i=this;i.state={},i.getterCache={},i.status="resting",i.transaction=!1,i.transactionCache={},i.callbacks=[],this._processActions(e);let t=e.initialState||{};if(i.copyOfInitialState=i._copyValue(t),i.ttl=-1,i.lastUpdatedState={},e.ttl&&(i.ttl=e.ttl,Object.keys(i.copyOfInitialState).forEach(s=>i.lastUpdatedState[s]=new Date().getTime())),e.persist){i.persist=typeof e.persist=="string"?$(e.persist):e.persist;let s=i.persist.getState(),r=i.persist.lastUpdated();s&&r&&(i.ttl===-1||i._lastUpdatedTimeDiff(r)<i.ttl)&&(t=s)}this._processState(t)}_processActions(e){let i=this,t=Object.keys(e);t.length&&t.forEach(s=>{i[s]||typeof e[s]!="function"||(i[s]=e[s].bind(i))})}_processState(e){let i=this;i.state=new Proxy(e,{set:(t,s,r)=>(i.transaction&&!i.transactionCache[s]&&(i.transactionCache[s]=i._copyValue(t[s])),t[s]=r,i.lastUpdatedState[s]=new Date().getTime(),i.getterCache={},i.transaction||(i.persist&&i.persist.setState(i.state),i.status="resting",i._processCallbacks(i.state)),!0),get:(t,s)=>i.ttl>-1&&i._lastUpdatedTimeDiff(i.lastUpdatedState[s])>i.ttl?(i.persist&&i.persist.removeState(),i.copyOfInitialState[s]):t[s]})}_lastUpdatedTimeDiff(e){return Math.round((new Date().getTime()-e)/1e3)}setState(e){let i=s=>{if(!s||typeof s!="object")return;let r=this.transaction;r||(this.transactionCache={},this.transaction=!0);for(let n in s)this.state[n]&&this.state[n]===s[n]||(this.state[n]=s[n]);r||(this.transaction=!1,this.persist&&this.persist.setState(this.state),this._processCallbacks(this.state))},t=e(this.state);f(t)?t.then(i):i(t)}getState(e){if(e){if(!this.getterCache[e]){let i=(Array.isArray(e)?e:e.match(/([^[.\]])+/g)).reduce((t,s)=>t&&t[s],this.state);if(i==null)return;this.getterCache[e]=i}return this.getterCache[e]}}_processCallbacks(e){return!!this.callbacks.length&&(this.callbacks.forEach(i=>i(e)),!0)}subscribe(e){if(typeof e!="function")throw new Error("Dude, you can only subscribe to store changes with a valid function");return this.callbacks.push(e),()=>{this.callbacks=this.callbacks.filter(i=>i!==e)}}_copyValue(e){return e&&JSON.parse(JSON.stringify(e))}clear(e=!0){this.getterCache={},this.transactionCache={},this.lastUpdatedState={},this.persist&&this.persist.removeState(),this.transaction=!0,this.status="clear";let i=this._copyValue(this.copyOfInitialState);for(let t in i)this.state[t]=i[t];this.transaction=!1,this.status="resting",e&&this._processCallbacks(this.state)}};function w(a,e){let i=D(a);return i||(i=new m(e),globalThis.__ficusjs__=globalThis.__ficusjs__||{},globalThis.__ficusjs__.store=globalThis.__ficusjs__.store||{},globalThis.__ficusjs__.store[a]=i,i)}function D(a){if(globalThis.__ficusjs__&&globalThis.__ficusjs__.store&&globalThis.__ficusjs__.store[a])return globalThis.__ficusjs__.store[a]}var R={address:"0x1c504d230620b4c208d2ed6fa2f58e4f432b3c78"},k=w("web3.sign",{initialState:{account:null,web3:{provider:null}},setAccount(a){this.state.account=a}});g("web3-connect-metamask",y(k,{renderer:b,async handleConnect(){let a=await V(),e=await J(a);this.store.setAccount(e),console.info(`Account connected: ${e}`)},render(){return u`
        <button type="button" onclick=${this.handleConnect}>
          Connect Wallet
        </button>
      `}}));async function M(a,e,i){let t={nonce:"0x00",to:R.address,from:ethereum.selectedAddress,data:e,chainId:i},s=await ethereum.request({method:"eth_sendTransaction",params:[t]})}g("web3-abt-form",y(k,{renderer:b,props:{},async onSubmit(a){a.preventDefault();let e=Object.fromEntries(new FormData(a.target).entries()),i="0x00",t="0x4",s=`0xd0def521000000000000000000000000${e.to.slice(2)}0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000005968747470733a2f2f6261666b726569656473693266616c697866646f6d73377278687a6d6175716f653232726a7471366761623364766e366c756f376b7533646d7a792e697066732e6e667473746f726167652e6c696e6b2f00000000000000`;await M(i,s,t)},render(){let{account:a}=this.store.state;return u`
        <form onsubmit=${this.onSubmit}>
          To:
          <input placeholder="ethereum address: 0x..." name="to" type="text" />
          <br />
          Image URI:
          https://bafkreiedsi2falixfdoms7rxhzmauqoe22rjtq6gab3dvn6luo7ku3dmzy.ipfs.nftstorage.link/
          <br />

          ${a?"":u`<web3-connect-metamask><//>`}
          ${a?u`<input type="submit" value="Mint SBT" />`:""}
        </form>
      `}}));async function V(){return await(0,T.default)()}async function J(a){if(a)return(await ethereum.request({method:"eth_requestAccounts"}))[0];window.alert("Only works with Metamask")}})();
//# sourceMappingURL=web3-input.js.map
